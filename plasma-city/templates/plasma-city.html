<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
	<!-- 2018-08-03 ven. 23:48 -->
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>&lrm;</title>
	<meta name="generator" content="Org mode" />
	<meta name="author" content="teddd" />
	<style type="text/css">
	  <!--/*--><![CDATA[/*><!--*/
	  .title  { text-align: center;
				margin-bottom: .2em; }
	  .subtitle { text-align: center;
				  font-size: medium;
				  font-weight: bold;
				  margin-top:0; }
	  .todo   { font-family: monospace; color: red; }
	  .done   { font-family: monospace; color: green; }
	  .priority { font-family: monospace; color: orange; }
	  .tag    { background-color: #eee; font-family: monospace;
				padding: 2px; font-size: 80%; font-weight: normal; }
	  .timestamp { color: #bebebe; }
	  .timestamp-kwd { color: #5f9ea0; }
	  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
	  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
	  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
	  .underline { text-decoration: underline; }
	  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
	  p.verse { margin-left: 3%; }
	  pre {
		  border: 1px solid #ccc;
		  box-shadow: 3px 3px 3px #eee;
		  padding: 8pt;
		  font-family: monospace;
		  overflow: auto;
		  margin: 1.2em;
	  }
	  pre.src {
		  position: relative;
		  overflow: visible;
		  padding-top: 1.2em;
	  }
	  pre.src:before {
		  display: none;
		  position: absolute;
		  background-color: white;
		  top: -10px;
		  right: 10px;
		  padding: 3px;
		  border: 1px solid black;
	  }
	  pre.src:hover:before { display: inline;}
	  /* Languages per Org manual */
	  pre.src-asymptote:before { content: 'Asymptote'; }
	  pre.src-awk:before { content: 'Awk'; }
	  pre.src-C:before { content: 'C'; }
	  /* pre.src-C++ doesn't work in CSS */
	  pre.src-clojure:before { content: 'Clojure'; }
	  pre.src-css:before { content: 'CSS'; }
	  pre.src-D:before { content: 'D'; }
	  pre.src-ditaa:before { content: 'ditaa'; }
	  pre.src-dot:before { content: 'Graphviz'; }
	  pre.src-calc:before { content: 'Emacs Calc'; }
	  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
	  pre.src-fortran:before { content: 'Fortran'; }
	  pre.src-gnuplot:before { content: 'gnuplot'; }
	  pre.src-haskell:before { content: 'Haskell'; }
	  pre.src-hledger:before { content: 'hledger'; }
	  pre.src-java:before { content: 'Java'; }
	  pre.src-js:before { content: 'Javascript'; }
	  pre.src-latex:before { content: 'LaTeX'; }
	  pre.src-ledger:before { content: 'Ledger'; }
	  pre.src-lisp:before { content: 'Lisp'; }
	  pre.src-lilypond:before { content: 'Lilypond'; }
	  pre.src-lua:before { content: 'Lua'; }
	  pre.src-matlab:before { content: 'MATLAB'; }
	  pre.src-mscgen:before { content: 'Mscgen'; }
	  pre.src-ocaml:before { content: 'Objective Caml'; }
	  pre.src-octave:before { content: 'Octave'; }
	  pre.src-org:before { content: 'Org mode'; }
	  pre.src-oz:before { content: 'OZ'; }
	  pre.src-plantuml:before { content: 'Plantuml'; }
	  pre.src-processing:before { content: 'Processing.js'; }
	  pre.src-python:before { content: 'Python'; }
	  pre.src-R:before { content: 'R'; }
	  pre.src-ruby:before { content: 'Ruby'; }
	  pre.src-sass:before { content: 'Sass'; }
	  pre.src-scheme:before { content: 'Scheme'; }
	  pre.src-screen:before { content: 'Gnu Screen'; }
	  pre.src-sed:before { content: 'Sed'; }
	  pre.src-sh:before { content: 'shell'; }
	  pre.src-sql:before { content: 'SQL'; }
	  pre.src-sqlite:before { content: 'SQLite'; }
	  /* additional languages in org.el's org-babel-load-languages alist */
	  pre.src-forth:before { content: 'Forth'; }
	  pre.src-io:before { content: 'IO'; }
	  pre.src-J:before { content: 'J'; }
	  pre.src-makefile:before { content: 'Makefile'; }
	  pre.src-maxima:before { content: 'Maxima'; }
	  pre.src-perl:before { content: 'Perl'; }
	  pre.src-picolisp:before { content: 'Pico Lisp'; }
	  pre.src-scala:before { content: 'Scala'; }
	  pre.src-shell:before { content: 'Shell Script'; }
	  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
	  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
	  pre.src-cpp:before  { content: 'C++'; }
	  pre.src-abc:before  { content: 'ABC'; }
	  pre.src-coq:before  { content: 'Coq'; }
	  pre.src-groovy:before  { content: 'Groovy'; }
	  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
	  pre.src-bash:before  { content: 'bash'; }
	  pre.src-csh:before  { content: 'csh'; }
	  pre.src-ash:before  { content: 'ash'; }
	  pre.src-dash:before  { content: 'dash'; }
	  pre.src-ksh:before  { content: 'ksh'; }
	  pre.src-mksh:before  { content: 'mksh'; }
	  pre.src-posh:before  { content: 'posh'; }
	  /* Additional Emacs modes also supported by the LaTeX listings package */
	  pre.src-ada:before { content: 'Ada'; }
	  pre.src-asm:before { content: 'Assembler'; }
	  pre.src-caml:before { content: 'Caml'; }
	  pre.src-delphi:before { content: 'Delphi'; }
	  pre.src-html:before { content: 'HTML'; }
	  pre.src-idl:before { content: 'IDL'; }
	  pre.src-mercury:before { content: 'Mercury'; }
	  pre.src-metapost:before { content: 'MetaPost'; }
	  pre.src-modula-2:before { content: 'Modula-2'; }
	  pre.src-pascal:before { content: 'Pascal'; }
	  pre.src-ps:before { content: 'PostScript'; }
	  pre.src-prolog:before { content: 'Prolog'; }
	  pre.src-simula:before { content: 'Simula'; }
	  pre.src-tcl:before { content: 'tcl'; }
	  pre.src-tex:before { content: 'TeX'; }
	  pre.src-plain-tex:before { content: 'Plain TeX'; }
	  pre.src-verilog:before { content: 'Verilog'; }
	  pre.src-vhdl:before { content: 'VHDL'; }
	  pre.src-xml:before { content: 'XML'; }
	  pre.src-nxml:before { content: 'XML'; }
	  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
	  pre.src-conf:before { content: 'Configuration File'; }

	  table { border-collapse:collapse; }
	  caption.t-above { caption-side: top; }
	  caption.t-bottom { caption-side: bottom; }
	  td, th { vertical-align:top;  }
	  th.org-right  { text-align: center;  }
	  th.org-left   { text-align: center;   }
	  th.org-center { text-align: center; }
	  td.org-right  { text-align: right;  }
	  td.org-left   { text-align: left;   }
	  td.org-center { text-align: center; }
	  dt { font-weight: bold; }
	  .footpara { display: inline; }
	  .footdef  { margin-bottom: 1em; }
	  .figure { padding: 1em; }
	  .figure p { text-align: center; }
	  .inlinetask {
		  padding: 10px;
		  border: 2px solid gray;
		  margin: 10px;
		  background: #ffffcc;
	  }
	  #org-div-home-and-up
	  { text-align: right; font-size: 70%; white-space: nowrap; }
	  textarea { overflow-x: auto; }
	  .linenr { font-size: smaller }
	  .code-highlighted { background-color: #ffff00; }
	  .org-info-js_info-navigation { border-style: none; }
	  #org-info-js_console-label
      { font-size: 10px; font-weight: bold; white-space: nowrap; }
	  .org-info-js_search-highlight
      { background-color: #ffff00; color: #000000; font-weight: bold; }
	  .org-svg { width: 90%; }
	  /*]]>*/-->
	</style>
	<script type="text/javascript">
	  /*
	   @licstart  The following is the entire license notice for the
	   JavaScript code in this tag.

	   Copyright (C) 2012-2018 Free Software Foundation, Inc.

	   The JavaScript code in this tag is free software: you can
	   redistribute it and/or modify it under the terms of the GNU
	   General Public License (GNU GPL) as published by the Free Software
	   Foundation, either version 3 of the License, or (at your option)
	   any later version.  The code is distributed WITHOUT ANY WARRANTY;
	   without even the implied warranty of MERCHANTABILITY or FITNESS
	   FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

	   As additional permission under GNU GPL version 3 section 7, you
	   may distribute non-source (e.g., minimized or compacted) forms of
	   that code without the copy of the GNU GPL normally required by
	   section 4, provided you include this license notice and a URL
	   through which recipients can access the Corresponding Source.


	   @licend  The above is the entire license notice
	   for the JavaScript code in this tag.
	  */
	<!--/*--><![CDATA[/*><!--*/
	  function CodeHighlightOn(elem, id)
	  {
		  var target = document.getElementById(id);
		  if(null != target) {
			  elem.cacheClassElem = elem.className;
			  elem.cacheClassTarget = target.className;
			  target.className = "code-highlighted";
			  elem.className   = "code-highlighted";
		  }
	  }
	  function CodeHighlightOff(elem, id)
	  {
		  var target = document.getElementById(id);
		  if(elem.cacheClassElem)
			  elem.className = elem.cacheClassElem;
		  if(elem.cacheClassTarget)
			  target.className = elem.cacheClassTarget;
	  }
	  /*]]>*///-->
	</script>
  </head>
  <body>
	<div id="content">
	  <div id="table-of-contents">
		<h2>Table of Contents</h2>
		<div id="text-table-of-contents">
		  <ul>
			<li><a href="#org45f721a">1. Intro</a>
			  <ul>
				<li><a href="#orgedef605">1.1. Foreword</a></li>
				<li><a href="#org123fd75">1.2. State of the coder</a></li>
				<li><a href="#orgaf5425d">1.3. Purpose</a></li>
			  </ul>
			</li>
			<li><a href="#orgacd755a">2. Install instruction for this litterate programm</a>
			  <ul>
				<li><a href="#orga69bb63">2.1. What is litterate programming ?</a></li>
				<li><a href="#org5931ad9">2.2. Org babel</a></li>
				<li><a href="#orgdfc9f9c">2.3. Export Org File</a></li>
				<li><a href="#org66e88e4">2.4. Other exports</a>
				  <ul>
					<li><a href="#org39b1bf3">2.4.1. <span class="todo TODO">TODO</span> How to export this org file to a python package ?</a></li>
					<li><a href="#org1c11cd9">2.4.2. <span class="todo TODO">TODO</span> How to export this org file to a jupyter notebook ?</a></li>
				  </ul>
				</li>
			  </ul>
			</li>
			<li><a href="#orgd2780db">3. Code</a>
			  <ul>
				<li><a href="#org7dd8775">3.1. Overview</a>
				  <ul>
					<li><a href="#orge54d978">3.1.1. traditionnal programming perspective</a></li>
					<li><a href="#org55b856c">3.1.2. litterate programming perspective</a></li>
				  </ul>
				</li>
				<li><a href="#orgd581361">3.2. Let's get started</a>
				  <ul>
					<li><a href="#org40f76e7">3.2.1. Server</a></li>
					<li><a href="#orgccf2a86">3.2.2. Data</a></li>
					<li><a href="#org515f8f8">3.2.3. Feed</a></li>
				  </ul>
				</li>
			  </ul>
			</li>
			<li><a href="#org6f11168">4. Appendices</a>
			  <ul>
				<li><a href="#org2f0bc0f">4.1. Org Tangle</a>
				  <ul>
					<li><a href="#org783cc8a">4.1.1. General</a></li>
					<li><a href="#org156b566">4.1.2. Follow links</a></li>
					<li><a href="#orgfdefb07">4.1.3. Tangle according to the file system</a></li>
					<li><a href="#org8848f68">4.1.4. Tangle all code blocks in a subtree to the same file</a></li>
				  </ul>
				</li>
			  </ul>
			</li>
		  </ul>
		</div>
	  </div>

	  <div id="outline-container-org45f721a" class="outline-2">
		<h2 id="org45f721a"><span class="section-number-2">1</span> Intro</h2>
		<div class="outline-text-2" id="text-1">
		</div>
		<div id="outline-container-orgedef605" class="outline-3">
		  <h3 id="orgedef605"><span class="section-number-3">1.1</span> Foreword</h3>
		  <div class="outline-text-3" id="text-1-1">
			<p>
			  My aim with this programm is to have a blog on which I can publish my data science works.
			</p>
		  </div>
		</div>

		<div id="outline-container-org123fd75" class="outline-3">
		  <h3 id="org123fd75"><span class="section-number-3">1.2</span> State of the coder</h3>
		  <div class="outline-text-3" id="text-1-2">
			<p>
			  I already have a server running with python and mysql. I also have a domain name at ‘www.plasma.city’.
			  I already have good notions of programming with python and basic understanding of the web, html and css.
			</p>

			<p>
			  What I don't know though, is how to use the Flask micro-framework to build a website and deploy it on my server.
			  Also I don't know how I can export org files to html pages of website.
			  I would also like to add a script that publishes automaticly my articles based on a synchronisation of a folder on my local computer where I would save them.
			</p>
		  </div>
		</div>

		<div id="outline-container-orgaf5425d" class="outline-3">
		  <h3 id="orgaf5425d"><span class="section-number-3">1.3</span> Purpose</h3>
		  <div class="outline-text-3" id="text-1-3">
			<p>
			  So the aim of this programm is to provide an easy way to publish my work on a website. This website has to be an excellent communication tool presenting my work in a fancy way.
			</p>
		  </div>
		</div>
	  </div>

	  <div id="outline-container-orgacd755a" class="outline-2">
		<h2 id="orgacd755a"><span class="section-number-2">2</span> Install instruction for this litterate programm</h2>
		<div class="outline-text-2" id="text-2">
		</div>
		<div id="outline-container-orga69bb63" class="outline-3">
		  <h3 id="orga69bb63"><span class="section-number-3">2.1</span> What is litterate programming ?</h3>
		  <div class="outline-text-3" id="text-2-1">
			<p>
			  Litterate programming is a programming method that emphasises the human reflexion over the computer understanding of your code.
			  Hence litterate programming is know for making programms more understandable for both programmers and non-programmers.
			  Literrate programming also has the virtue to make the documentation and design of the programm saner because it focuses on the end result and its publication.
			</p>

			<p>
			  This is my first attemt to write a program in litterate programming fashion.
			</p>
		  </div>
		</div>

		<div id="outline-container-org5931ad9" class="outline-3">
		  <h3 id="org5931ad9"><span class="section-number-3">2.2</span> Org babel</h3>
		  <div class="outline-text-3" id="text-2-2">
			<p>
			  All the code was writen in an org file. Org files can be opened in Emacs using a built-in mode called org-mode. It provides a convinient way to manage a litterate programm. In org files, code is cotained in code block which are organised in org headings. These heading can have meta-data so that we can use meta-programming to manage our code automaticly.
			</p>
		  </div>
		</div>

		<div id="outline-container-orgdfc9f9c" class="outline-3">
		  <h3 id="orgdfc9f9c"><span class="section-number-3">2.3</span> Export Org File</h3>
		  <div class="outline-text-3" id="text-2-3">
			<p>
			  You can download the org file and run it in emacs. Once you are in emacs org-mode visiting the file in a buffer, you can export the code contained in this org file to a full python module. This action is called tangling in litterate programming.
			</p>
		  </div>
		</div>


		<div id="outline-container-org66e88e4" class="outline-3">
		  <h3 id="org66e88e4"><span class="section-number-3">2.4</span> Other exports</h3>
		  <div class="outline-text-3" id="text-2-4">
			<p>
			  For compatibility with other work environements, I also exported the org files as a python package and as a jupyter notebook. You can also generate those easily by downloading the org file and exporting it in org-mode.
			</p>
		  </div>

		  <div id="outline-container-org39b1bf3" class="outline-4">
			<h4 id="org39b1bf3"><span class="section-number-4">2.4.1</span> <span class="todo TODO">TODO</span> How to export this org file to a python package ?</h4>
		  </div>

		  <div id="outline-container-org1c11cd9" class="outline-4">
			<h4 id="org1c11cd9"><span class="section-number-4">2.4.2</span> <span class="todo TODO">TODO</span> How to export this org file to a jupyter notebook ?</h4>
		  </div>
		</div>
	  </div>

	  <div id="outline-container-orgd2780db" class="outline-2">
		<h2 id="orgd2780db"><span class="section-number-2">3</span> Code</h2>
		<div class="outline-text-2" id="text-3">
		</div>
		<div id="outline-container-org7dd8775" class="outline-3">
		  <h3 id="org7dd8775"><span class="section-number-3">3.1</span> Overview</h3>
		  <div class="outline-text-3" id="text-3-1">
			<p>
			  We will now write the code of our blog-website.
			</p>

			<p>
			  There are several way of designing a programm, here are two approches.
			</p>
		  </div>

		  <div id="outline-container-orge54d978" class="outline-4">
			<h4 id="orge54d978"><span class="section-number-4">3.1.1</span> traditionnal programming perspective</h4>
			<div class="outline-text-4" id="text-3-1-1">
			  <p>
				So, what code will wee need ?
			  </p>
			</div>

			<ol class="org-ol">
			  <li><a id="org8dcd446"></a>python flask app<br />
				<div class="outline-text-5" id="text-3-1-1-1">
				  <p>
					We will need a flask app to run our server. In this we will define how we handle queries made to our server. The server will for each query send back a different output that the client will load. OFr exemple if the client is visiting the website with a webbrowser, he will send http queries and we usually want to send him html documents back.
				  </p>
				</div>
			  </li>

			  <li><a id="org6cc56c3"></a>html documents<br />
				<div class="outline-text-5" id="text-3-1-1-2">
				  <p>
					We need to build our skelton page. We can decide what shape the site has tp have, what parts will remain between each page, and what html code is specific to particular pages.
				  </p>
				</div>

				<ol class="org-ol">
				  <li><a id="orgc2d6103"></a>templates<br />
					<div class="outline-text-6" id="text-3-1-1-2-1">
					  <p>
						We will handle the generalization of page structures with templates. This will be handled by a module that is implemented in flask called ninjasomething.
					  </p>

					  <p>
						The aim is to be able to call templates and fill them depending on context.
					  </p>
					</div>
				  </li>

				  <li><a id="orgdbd86c4"></a>css<br />
					<div class="outline-text-6" id="text-3-1-1-2-2">
					  <p>
						The generalization of page apparences will be generated by our css files.
					  </p>
					</div>
				  </li>
				</ol>
			  </li>
			</ol>
		  </div>


		  <div id="outline-container-org55b856c" class="outline-4">
			<h4 id="org55b856c"><span class="section-number-4">3.1.2</span> litterate programming perspective</h4>
			<div class="outline-text-4" id="text-3-1-2">
			  <p>
				So, what do we need ?
			  </p>
			</div>

			<ol class="org-ol">
			  <li><a id="org271006d"></a>layers<br />
				<div class="outline-text-5" id="text-3-1-2-1">
				  <p>
					We need to let different layers communicate together to act as a system that matches our desires
				  </p>
				</div>

				<ol class="org-ol">
				  <li><a id="orgb9a1f48"></a>server program<br />
					<div class="outline-text-6" id="text-3-1-2-1-1">
					  <p>
						First we want the server to deliver the our website to visitor. In html first.
					  </p>
					</div>
				  </li>

				  <li><a id="org9e17a0f"></a>server data<br />
					<div class="outline-text-6" id="text-3-1-2-1-2">
					  <p>
						The server needs to acces the data he has to retrive.
					  </p>
					</div>
				  </li>

				  <li><a id="orgfb00e7e"></a>filling the server<br />
					<div class="outline-text-6" id="text-3-1-2-1-3">
					  <p>
						We need to populate the server with local data.
					  </p>
					</div>
				  </li>
				</ol>
			  </li>
			</ol>
		  </div>
		</div>

		<div id="outline-container-orgd581361" class="outline-3">
		  <h3 id="orgd581361"><span class="section-number-3">3.2</span> Let's get started</h3>
		  <div class="outline-text-3" id="text-3-2">
			<p>
			  We will choose the litterate programming perspective.
			  So we need to build a server able to retrive html, based on available data that we feed him with.
			</p>
		  </div>

		  <div id="outline-container-org40f76e7" class="outline-4">
			<h4 id="org40f76e7"><span class="section-number-4">3.2.1</span> Server</h4>
			<div class="outline-text-4" id="text-3-2-1">
			</div>
			<ol class="org-ol">
			  <li><a id="orgc3c1ae1"></a>Flask Application<br />
				<div class="outline-text-5" id="text-3-2-1-1">
				  <p>
					When we run the app, we would like to be able to access it with a browser. Let's make our server alive and talking.
				  </p>

				  <p>
					This is this can be considered as an introduction to flask. It follows the flask quickstart page.
				  </p>

				  <p>
					To understand how this link is managed in our final file tangling (when all the file is exported as a whole programm ready to run) please sea <a href="#org156b566">Org Tangle Appendice</a>. You can refer to the appendice each time there is a special meta-programming code doing things you don't understand.
				  </p>

				  <p>
					An easy way to go back and forth is to use the command C-u C-SPC to come back to the place you where before visiting the link or doing a isearch or chatever other command you used to make you jump to another position. This is a very handy tool for quick navigation. You can now jump headlessly around, you have a way to come back !
				  </p>
				</div>

				<ol class="org-ol">
				  <li><a id="org26ba05d"></a>imports<br />
					<div class="outline-text-6" id="text-3-2-1-1-1">
					  <div class="org-src-container">
						<pre class="src src-python"><span style="color: #ba55d3; font-weight: bold;">from</span> flask <span style="color: #ba55d3; font-weight: bold;">import</span> Flask
						  <span style="color: #dbdb95;">app</span> = Flask(<span style="color: #23d7d7;">__name__</span>)
						</pre>
					  </div>
					</div>
				  </li>


				  <li><a id="org7b2f014"></a>route<br />
					<div class="outline-text-6" id="text-3-2-1-1-2">
					  <p>
						The route() function binds a function to an URL
					  </p>

					  <div class="org-src-container">
						<pre class="src src-python"><span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">index</span>():
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'Index Page'</span>
						</pre>
					  </div>
					</div>
				  </li>

				  <li><a id="orgeec578f"></a>rules variables<br />
					<div class="outline-text-6" id="text-3-2-1-1-3">
					  <p>
						You can add variable sections to a URL by marking sections with &lt;variable<sub>name</sub>&gt;. Your function then receives the
						&lt;variable<sub>name</sub>&gt; as a keyword argument.
					  </p>

					  <p>
						Optionally, you can use a converter to specify the type of the argument like
						&lt;converter:variable<sub>name</sub>&gt;
					  </p>

					  <div class="org-src-container">
						<pre class="src src-python"><span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/user/&lt;username&gt;'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">show_user_profile</span>(username):
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #74af68;"># </span><span style="color: #74af68;">show the user profile for that user</span>
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'User %s'</span> % username

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/post/&lt;int:post_id&gt;'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">show_post</span>(post_id):
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #74af68;"># </span><span style="color: #74af68;">show the post with the given id, the id is an integer</span>
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'Post %d'</span> % post_id

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/path/&lt;path:subpath&gt;'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">show_subpath</span>(subpath):
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #74af68;"># </span><span style="color: #74af68;">show the subpath after /path/</span>
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'Subpath %s'</span> % subpath
						</pre>
					  </div>
					</div>
				  </li>


				  <li><a id="org8a42ea4"></a>URL building<br />
					<div class="outline-text-6" id="text-3-2-1-1-4">
					  <div class="org-src-container">
						<pre class="src src-python">
						  <span style="color: #ba55d3; font-weight: bold;">from</span> flask <span style="color: #ba55d3; font-weight: bold;">import</span> url_for

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/login'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">login</span>():
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'login'</span>

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/usr/&lt;username&gt;'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">profile</span>(username):
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> <span style="color: #e67128;">'{}\'s profile'</span>.<span style="color: #23d7d7;">format</span>(username)

						  <span style="color: #ba55d3; font-weight: bold;">with</span> app.test_request_context():
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">print</span>(url_for(<span style="color: #e67128;">'index'</span>))
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">print</span>(url_for(<span style="color: #e67128;">'login'</span>))
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">print</span>(url_for(<span style="color: #e67128;">'login'</span>, <span style="color: #23d7d7;">next</span>=<span style="color: #e67128;">'/'</span>))
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">print</span>(url_for(<span style="color: #e67128;">'profile'</span>, username=<span style="color: #e67128;">'John Doe'</span>))

						</pre>
					  </div>
					</div>
				  </li>

				  <li><a id="org0fdc3b5"></a>rendering templates<br />
					<div class="outline-text-6" id="text-3-2-1-1-5">
					  <div class="org-src-container">
						<pre class="src src-python">
						  <span style="color: #ba55d3; font-weight: bold;">from</span> flask <span style="color: #ba55d3; font-weight: bold;">import</span> render_template

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/hello/'</span>)
						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/hello/&lt;name&gt;'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">hello</span>(name=<span style="color: #008b8b;">None</span>):
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> render_template(<span style="color: #e67128;">'hello.html'</span>, name=name)

						</pre>
					  </div>
					</div>
				  </li>

				  <li><a id="org85f8c3a"></a>htmlfontify emacs function<br />
					<div class="outline-text-6" id="text-3-2-1-1-6">
					  <div class="org-src-container">
						<pre class="src src-python">
						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/codex/'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">codex</span>():
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> render_template(<span style="color: #e67128;">'codex.html'</span>)

						  <span style="color: #34cae2;">@app.route</span>(<span style="color: #e67128;">'/hello-ob/'</span>)
						  <span style="color: #ba55d3; font-weight: bold;">def</span> <span style="color: #00ede1; font-weight: bold;">hello_ob</span>():
						  <span style="background-color: #2e3748;"> </span>   <span style="color: #ba55d3; font-weight: bold;">return</span> render_template(<span style="color: #e67128;">'hello-ob.html'</span>)

						</pre>
					  </div>
					</div>
				  </li>
				</ol>
			  </li>
			  <li><a id="org5aaa9d6"></a>Python package ?<br />
				<div class="outline-text-5" id="text-3-2-1-2">
				  <p>
					Create an <span class="underline"><span class="underline">init</span></span>.py file to redirect to our app
				  </p>

				  <p>
					or keep a module and change the setup.py file.
				  </p>

				  <div class="org-src-container">
					<pre class="src src-python">
					  <span style="color: #ba55d3; font-weight: bold;">pass</span>

					</pre>
				  </div>
				</div>
			  </li>

			  <li><a id="orgb6b2552"></a>Deployment<br />
				<div class="outline-text-5" id="text-3-2-1-3">
				  <p>
					Now the server works localy, let's try to put it on my distant server. Let's take a look at what the flask doc says about it.
				  </p>

				  <p>
					<a href="http://flask.pocoo.org/docs/1.0/tutorial/install/">http://flask.pocoo.org/docs/1.0/tutorial/install/</a>
				  </p>
				</div>

				<ol class="org-ol">
				  <li><a id="orgc978872"></a>Intallation<br />
					<div class="outline-text-6" id="text-3-2-1-3-1">
					  <div class="org-src-container">
						<pre class="src src-python">
						  <span style="color: #ba55d3; font-weight: bold;">from</span> setuptools <span style="color: #ba55d3; font-weight: bold;">import</span> find_packages, setup

						  setup(
						  <span style="background-color: #2e3748;"> </span>   name=<span style="color: #e67128;">'plasma-city'</span>,
						  <span style="background-color: #2e3748;"> </span>   version=<span style="color: #e67128;">'1.0.0'</span>,
						  <span style="background-color: #2e3748;"> </span>   packages=find_packages(),
						  <span style="background-color: #2e3748;"> </span>   include_package_data=<span style="color: #008b8b;">True</span>,
						  <span style="background-color: #2e3748;"> </span>   zip_safe=<span style="color: #008b8b;">False</span>,
						  <span style="background-color: #2e3748;"> </span>   install_requires=[
						  <span style="color: #e67128;">'flask'</span>,
						  <span style="background-color: #2e3748;"> </span>   ],
						  )

						</pre>
					  </div>

					  <div class="org-src-container">
						<pre class="src src-include">
						  graft plasma-city/static
						  graft plasma-city/templates
						  global-exclude *.pyc

						</pre>
					  </div>

					  <p>
						run pip install -e .
					  </p>
					</div>
				  </li>

				  <li><a id="org3875119"></a>Deploy<br />
					<div class="outline-text-6" id="text-3-2-1-3-2">
					  <p>
						get an ssh key / add key on the server
					  </p>

					  <p>
						copy wheel to the server
					  </p>

					  <p>
						run python setup.py bdist<sub>wheel</sub>
					  </p>
					</div>
				  </li>
				</ol>
			  </li>
			</ol>
		  </div>

		  <div id="outline-container-orgccf2a86" class="outline-4">
			<h4 id="orgccf2a86"><span class="section-number-4">3.2.2</span> Data</h4>
			<div class="outline-text-4" id="text-3-2-2">
			  <p>
				So now our server can send data that can be viewed in a browser.
			  </p>

			  <p>
				What do we now want the visitor to sea ? Obviously our articles. Maybe a mainpage containg all articles. Maybe a side bar. All this can be generated by templates.
			  </p>

			  <p>
				We now have to learn about Flask's sidekick : jinja.
			  </p>
			</div>

			<ol class="org-ol">
			  <li><a id="org38f9a05"></a>jinja tutorial<br />
				<div class="outline-text-5" id="text-3-2-2-1">
				  <p>
					We want to have
				  </p>
				</div>
			  </li>
			</ol>
		  </div>

		  <div id="outline-container-org515f8f8" class="outline-4">
			<h4 id="org515f8f8"><span class="section-number-4">3.2.3</span> Feed</h4>
		  </div>
		</div>
	  </div>



	  <div id="outline-container-org6f11168" class="outline-2">
		<h2 id="org6f11168"><span class="section-number-2">4</span> Appendices</h2>
		<div class="outline-text-2" id="text-4">
		</div>
		<div id="outline-container-org2f0bc0f" class="outline-3">
		  <h3 id="org2f0bc0f"><span class="section-number-3">4.1</span> Org Tangle</h3>
		  <div class="outline-text-3" id="text-4-1">
		  </div>
		  <div id="outline-container-org783cc8a" class="outline-4">
			<h4 id="org783cc8a"><span class="section-number-4">4.1.1</span> General</h4>
			<div class="outline-text-4" id="text-4-1-1">
			  <p>
				We will need to be able to tangle the code in this org file to the expected files. Why not even have the html code contained in this file so that everything is accessible on a signle page ?
				For this to work the way we want, we need to make sure that in the tangling process, each source code block is exported so that the outcome is a nice organised directory. This can be done by defining properties to source block header and defining rules that will tangle deferent properties differently.
			  </p>
			</div>
		  </div>

		  <div id="outline-container-org156b566" class="outline-4">
			<h4 id="org156b566"><span class="section-number-4">4.1.2</span> Follow links</h4>
			<div class="outline-text-4" id="text-4-1-2">
			  <p>
				We did not wanted to separate the code in different files. But it could have been done so for convinience. But since the org file view is modulable, why would we need to ?
			  </p>

			  <p>
				There is such a possibility though, that the tangling process follows links and do some specific action on the encountered file. It can be very powerfull in other context.
			  </p>

			  <p>
				To figure this out, one should check John Kitchin's work on his blog and github page.
			  </p>
			</div>
		  </div>

		  <div id="outline-container-orgfdefb07" class="outline-4">
			<h4 id="orgfdefb07"><span class="section-number-4">4.1.3</span> Tangle according to the file system</h4>
			<div class="outline-text-4" id="text-4-1-3">
			  <p>
				We want org to tangle the different code blocks in this file in specific locations in our project directory. This can be done by adding to the "header-args" property the value ":tangle "path/to/our/file/directory/file-name.file-extension" "
			  </p>

			  <p>
				Note that we need to specify an extension because we are not givin the value "yes" to :tangle, so the tangling process awaits from us that we specify path, file name and extension.
			  </p>
			</div>
		  </div>
		  <div id="outline-container-org8848f68" class="outline-4">
			<h4 id="org8848f68"><span class="section-number-4">4.1.4</span> Tangle all code blocks in a subtree to the same file</h4>
			<div class="outline-text-4" id="text-4-1-4">
			  <p>
				In order to do this, we need to add a property to the headline whose children we want to have the same output file. To set a property C-c C-x p can help. Now we define a header-args property with value ":tangle path/to/our/file/file-name.filext"
			  </p>

			  <p>
				In order to make this work, we need to able properties inheritance and add the property header-args to the list of inheretable properties.
			  </p>
			</div>
		  </div>
		</div>
	  </div>
	</div>
	<div id="postamble" class="status">
	  <p class="author">Author: teddd</p>
	  <p class="date">Created: 2018-08-03 ven. 23:48</p>
	  <p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
	</div>
  </body>
</html>
